var validArgs=function(){for(var e=[],t=PPx.Arguments;!t.atEnd();t.moveNext())e.push(t.value);return e},safeArgs=function(){for(var e=[],t=validArgs(),n=0,u=arguments.length;n<u;n++)e.push(_valueConverter(n<0||arguments.length<=n?undefined:arguments[n],t[n]));return e},_valueConverter=function(e,t){if(null==t||""===t)return null!=e?e:undefined;switch(typeof e){case"number":var n=Number(t);return isNaN(n)?e:n;case"boolean":return"false"!==t&&"0"!==t&&null!=t;default:return t}},isEmptyStr=function(e){return""===e},e=80001,t="ppm_grepsyncview",n={ppvid:"",close:!1,debug:!1,lnum:"",tmod:""},main=function(){var u=safeArgs("W",0,"0"),c=u[0],x=u[1],P=u[2];n.ppvid=c,n.close=1===x,n.debug="DEBUG"===P,n.debug&&debugMsg("start"),n.lnum=PPx.Extract("%*getcust(XV_lnum)"),n.tmod=PPx.Extract("%*getcust(XV_tmod)"),startPPv(),PPx.StayMode=e,ppx_Syncview(),PPx.Execute("*linecust "+t+',KC_main:SELECTEVENT,*if ("%n"=="%%n")%%:*script ":'+e+',ppx_Syncview"')},ppx_Syncview=function(){var e=PPx.Extract('%*name(DC,"%*comment")'),t=PPx.Extract('%*name(SC,"%FSC")');"---"!==e&&"-"!==t&&(e!==PPx.Extract("%*extract(V"+n.ppvid+',"%%FDC")')&&PPx.Execute("*execute V"+n.ppvid+',%%J"'+e+'"'),PPx.Execute("*execute V"+n.ppvid+",*jumpline "+t),isEmptyStr(PPx.Extract("%NV"+n.ppvid))&&ppx_resume())},ppx_resume=function(){PPx.StayMode=0,PPx.SyncView=0,PPx.Execute("*linecust "+t+",KC_main:SELECTEVENT,"),PPx.Execute("*setcust XV_lnum="+n.lnum+"%:*setcust XV_tmod="+n.tmod),n.close&&PPx.Execute("*closeppx V"+n.ppvid),n.debug&&debugMsg("discard")},startPPv=function(){var e=PPx.Extract('%+name(X,"%FDV")');PPx.Execute("*setcust XV_lnum=1%:*setcust XV_tmod=1"),PPx.Execute("%Oa *ppv -bootid:"+n.ppvid+' -k *topmostwindow %%N,1%%:*find "'+e+'"%%:*focus %n'),PPx.Sleep(100)},debugMsg=function(e){return PPx.linemessage("[DEBUG] lfSyncView "+e)};main();
